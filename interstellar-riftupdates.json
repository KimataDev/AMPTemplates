[
    {
        "UpdateStageName": "SteamCMD Download",
        "UpdateSourcePlatform": "All",
        "UpdateSource": "SteamCMD",
        "UpdateSourceData": "363360",
        "UpdateSourceArgs": "363360",
        "ForceDownloadPlatform": "Windows"
    },
	{
        "UpdateStageName": "Winetricks Download",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "FetchURL",
        "UpdateSourceData": "https://raw.githubusercontent.com/Winetricks/winetricks/master/src/winetricks",
        "UpdateSourceArgs": "winetricks",
        "UpdateSourceTarget": "{{$FullInstanceDir}}",
        "OverwriteExistingFiles": true
    },
	{
        "UpdateStageName": "Initialise Wine",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
		"UpdateSourceArgs": "-c 'Xvfb :5 -screen 0 1024x768x16 & env WINEARCH=win32 WINEDEBUG=-all WINEDLLOVERRIDES=\"mscoree=d\" WINEPREFIX=\"{{$FullRootDir}}.wine\" /usr/bin/wineboot --init /nogui && env WINEARCH=win32 WINEDEBUG=-all WINEPREFIX=\"{{$FullRootDir}}.wine\" ./winetricks -q corefonts && env DISPLAY=:5.0 WINEARCH=win32 WINEDEBUG=-all WINEPREFIX=\"{{$FullRootDir}}.wine\" ./winetricks -q vcrun2012 && env DISPLAY=:5.0 WINEARCH=win32 WINEDEBUG=-all WINEPREFIX=\"{{$FullRootDir}}.wine\" ./winetricks -q dotnet472 && pkill -f Xvfb'",
        "SkipOnFailure": false
    }
]